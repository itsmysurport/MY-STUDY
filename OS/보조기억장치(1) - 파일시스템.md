# 보조기억장치(1) - 파일시스템



## 하드디스크(자기디스크)

### 트랙

- 디스크에 있는 동심원 모양의 영역

- 자기 디스크 상에서 데이터의 기록, 판독을 할 수 있는 띠 모양의 영역

### 섹터

- 한 조각의 파이와 같은 영역
- 일반적으로 자기디스크는 512바이트이며, 광디스크(CD-ROM)은 2048바이트이다.

### 실린더

- 자기디스크에서 반지름이 같은 트랙의 모임

### 클러스터

- 섹터 여러개를 하나로 묶은것

- 파일을 저장하도록 할당될수 있는 가장 작은 논리적 디스크 공간으로, **OS 담당자가 이를 정함**

  - 섹터 하나에 저장될 수 있는 양이 512Byte이기 때문에 16bit 시스템의 경우 디스크 저장공간이 32MB였다

  - 그래서 나온 것이 클러스트이며, 8개의 섹터를 하나로 묶으면 4KB 클러스터 즉, 저장공간이 256MB로 늘어난다.
    $$
    512 * 2^{16} = 512 * 65356 = 33554432 Byte = 32MB
    $$




![320px-Disk-structure2.svg](/home/itsmysurport/MY-STUDY/OS/images/320px-Disk-structure2.svg.png)

> A = 트랙, B=섹터, C=트랙의 섹터, D=클러스터



## 파일 VS 디렉토리

### 파일

- 관련된 정보의 집합
- 단순한 파일의 내용들이 들어가있다.

### 디렉토리

- 파일에 대한 정보, 메타데이터를 저장해 둔 특별한 파일
  - 메타데이터에는 파일의 이름, 종류, 크기, 생성날짜, 최근 접근 시간, 갱신시간, 소유자, 권한, 저장위치 등의 모든 정보가 들어있다.

![2362C241576086641B](/home/itsmysurport/MY-STUDY/OS/images/2362C241576086641B.png)

- fd = open("/a/b") 의 경우는 open만 하는 것이기 때문에 metadata만 RAM에 올라가는 것이며
- 만약 read나 write명령어를 사용하게 된다면 content도 RAM에 올라가게 된다.

## 파일 연속 할당 방법

디스크의 직접 접근 특성이 파일의 구현에 융통성을 허용한다. 거의 모든 경우에 하나의 디스크에 여러 파일이 저장되며 이 파일들을 어떻게 디스크 공간에 배치해야 효율적으로 사용할 수 있을지 고민하게 된다. 디스크 공간을 할당 방법과 특성을 살펴 보자.

### 연속 할당

- 디스크 상의 연속된 블록에 파일을 할당하는 방법

### 비연속 할당

- 디스크 상의 각각 다른 블록에 파일을 할당하는 방법
  - 연결할당 : 각 블록마다 다음 블록의 주소를 저장하고 있는 방식
  - 색인할당 : 파일 당 최소 한개의 인덱스 블록을 가지고 있는 방식
    - 인덱스 블록을 읽으면 파일의 블록들이 어디에 있는지 알수 있다.